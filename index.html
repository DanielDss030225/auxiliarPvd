<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Avaliação de Risco Mobile</title>

    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Estilos -->
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div id="app">
        <!-- View: Login (Simulação) -->
        <div id="view-login" class="view active">
            <div class="help-bar">
                <span class="help-text"> Primeira vez no App?</span>
                <a style="display: none;" href="https://wa.me/5531982654515" target="_blank" class="btn-whatsapp">
                    ACESSAR SUPORTE
                </a>
                <span style="font-size:10px; color:rgb(92, 92, 92);" class="help-text">Instale o AutoForm, e acesse o
                    REDS <br>
                    para
                    desbloquear seu
                    acesso!</span>
            </div>
            <div class="login-container">
                <div class="login-logo">

                    <img src="icon.png" alt="Logo PMMG" style="width: 80px; margin-bottom: 0px;">


                    <div class="idAv">
                        <h2>Identificação</h2>
                        <p>Avaliação de Risco</p>
                    </div>

                </div>
                <div class="form-group">
                    <label for="login_usuario">Usuário REDS</label>
                    <input type="text" id="login_usuario" placeholder="Ex: pm1234567" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="login_senha">Senha</label>
                    <input type="password" id="login_senha" placeholder="••••••••" autocomplete="current-password">
                </div>
                <button id="btn-login" class="nav-btn">
                    Acessar APP
                </button>
                <p id="login-error" class="login-error hidden">Credenciais inválidas. Verifique seu usuário e senha.</p>
            </div>
        </div>

        <!-- View: Dashboard -->
        <div id="view-dashboard" class="view hidden">
            <header class="app-header">
                <button id="btn-logout" class="icon-btn logout" title="Sair">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#666666" style="transform: scaleX(-1);">
                        <path
                            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
                    </svg>
                </button>
                <h1>Avaliações de Risco</h1>
                <button id="btn-open-search" class="icon-btn" title="Pesquisar">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                        fill="#666666">
                        <path
                            d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" />
                    </svg>
                </button>
            </header>

            <!-- NOVO: Barra de Pesquisa (tipo WhatsApp) -->
            <div id="search-bar" class="search-bar hidden">
                <button id="btn-close-search" class="icon-btn">←</button>
                <input type="text" id="input-search" placeholder="Pesquisar nome ou RG..." autocomplete="off">
            </div>

            <div class="content-container">
                <div id="lista-avaliacoes" class="lista-cards">
                    <!-- Cards serão injetados aqui via JS -->
                    <div class="loading-spinner">Carregando avaliações...</div>
                </div>
            </div>

            <button id="btn-nova-avaliacao" class="fab" title="Nova Avaliação">
                +
            </button>
        </div>

        <!-- View: Formulário -->
        <div id="view-formulario" class="view hidden">
            <header class="app-header">
                <button id="btn-voltar-dashboard" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                        viewBox="0 -960 960 960" width="24px" fill="#666666">
                        <path d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z" />
                    </svg></button>
                <h1 id="form-title">Nova Avaliação</h1>
                <button id="btn-salvar" class="text-btn">Salvar</button>
            </header>

            <!-- Barra de Navegação das Abas -->
            <nav class="tabs-nav">
                <button class="tab-btn active" data-tab="tab-dados-gerais">Geral</button>
                <button class="tab-btn" data-tab="tab-historico">Histórico</button>
                <button class="tab-btn" data-tab="tab-agressor">Agressor</button>
                <button class="tab-btn" data-tab="tab-vitima">Vítima</button>
                <button class="tab-btn" data-tab="tab-outros">Outros</button>
            </nav>

            <div class="content-container form-content">
                <!-- Aba 1: Dados Gerais -->
                <div id="tab-dados-gerais" class="tab-content active">
                    <div class="form-group">
                        <label for="input_rg_vitima">RG da Vítima</label>
                        <input type="text" id="input_rg_vitima" placeholder="Apenas números" inputmode="numeric"
                            pattern="[0-9]*">
                    </div>
                    <div class="form-group">
                        <label for="input_nome_vitima">Nome da Vítima *</label>
                        <input type="text" id="input_nome_vitima" placeholder="Nome completo da vítima">
                    </div>
                </div>

                <!-- Aba 2: Histórico -->
                <div id="tab-historico" class="tab-content">
                    <p class="section-title">Sobre o Histórico de Violência</p>
                    <div id="container-historico">
                        <!-- Perguntas injetadas via JS -->
                    </div>
                </div>

                <!-- Aba 3: Agressor -->
                <div id="tab-agressor" class="tab-content">
                    <p class="section-title">Sobre o(a) Agressor(a)</p>
                    <div id="container-agressor">
                        <!-- Perguntas injetadas via JS -->
                    </div>
                </div>

                <!-- Aba 4: Vítima -->
                <div id="tab-vitima" class="tab-content">
                    <p class="section-title">Sobre a Vítima</p>
                    <div id="container-vitima">
                        <!-- Perguntas injetadas via JS -->
                    </div>
                </div>

                <!-- Aba 5: Outros -->
                <div id="tab-outros" class="tab-content">
                    <p class="section-title">Outras Informações Importantes</p>
                    <div id="container-outros">
                        <!-- Perguntas injetadas via JS -->
                    </div>
                </div>
            </div>

            <!-- Barra de Navegação Fixa -->
            <div class="bottom-nav">
                <button id="btn-prev-tab" class="nav-btn">
                    Anterior
                </button>
                <button id="btn-next-tab" class="nav-btn">
                    Próximo
                </button>
            </div>
        </div>
    </div>

    <!-- Container para Toasts -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="questions.js"></script>
    <script src="app.js"></script>
</body>

</html>